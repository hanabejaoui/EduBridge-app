<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <nav class="top-nav">
      <nav class="top-nav">
        <div class="logo">
          <img src="/logo.png" alt="EduBridge Logo" class="logo-img">
          
        </div>
               
        <div class="logo"></div>
        <div class="nav-links">
          <a href="/">Dashboard</a>
          <a href="/student-profile.html">Profile</a>
          <a href="/student_ask_question.html">Ask Question</a>
          <a href="/student-responses.html">Responses</a>
          <a href="/logout">Logout</a>
        </div>
      </nav>
      
      
      
  <div class="form-container">
    <h2>Welcome, Student ğŸ“</h2>

    <a class="login-btn" href="/student_ask_question.html">â• Ask a New Question</a>
    <a class="login-btn" href="/matched-tutors.html">ğŸ” View Tutors for My Subject</a>

    <h3>Your Help Requests</h3>
    <div id="postsContainer"></div>

    
    <a href="/student-responses.html" class="response-button">ğŸ“¬ View Tutor Responses</a>

  </div>

  <script>
    let currentUserId;

    // Get current user session
    fetch('/session')
      .then(res => res.json())
      .then(data => {
        currentUserId = data.userId;
        loadPosts();
      });

    // Load only current student's posts
    function loadPosts() {
      fetch('/posts')
        .then(res => res.json())
        .then(posts => {
          const container = document.getElementById('postsContainer');
          container.innerHTML = '';

          const myPosts = posts.filter(post => post.user_id === currentUserId && post.type === 'request');

          if (myPosts.length === 0) {
            container.innerHTML = '<p>You havenâ€™t submitted any questions yet.</p>';
            return;
          }

          myPosts.forEach(post => {
            const div = document.createElement('div');
            div.className = 'post';
            div.innerHTML = `
              <b>Subject:</b> ${post.subject}<br>
              <b>Question:</b> ${post.description}<br>
              <button onclick="deletePost(${post.id})">ğŸ—‘ï¸ Delete</button>
              <hr>
            `;
            container.appendChild(div);
          });
        });
    }

    function deletePost(id) {
      if (!confirm('Delete this post?')) return;

      fetch(`/posts/${id}`, {
        method: 'DELETE'
      }).then(() => loadPosts());
    }
  </script>
</body>
</html>



